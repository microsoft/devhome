<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="DevHome.DevDiagnostics.Pages.SystemResourceUsagePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:DevHome.DevDiagnostics.Models"
    mc:Ignorable="d"
    NavigationCacheMode="Enabled">

    <Page.Resources>
        <models:HardwareTreeViewTemplateSelector x:Key="HardwareTreeViewTemplateSelector">
            <models:HardwareTreeViewTemplateSelector.HardwareTemplate>
                <DataTemplate x:DataType="models:HardwareNode">
                    <TreeViewItem AutomationProperties.Name="{x:Bind Name}"
                        Content="{x:Bind Name}"
                        ItemsSource="{x:Bind Children}" />
                </DataTemplate>
            </models:HardwareTreeViewTemplateSelector.HardwareTemplate>
            <models:HardwareTreeViewTemplateSelector.SensorGroupTemplate>
                <DataTemplate x:DataType="models:SensorGroupNode">
                    <TreeViewItem AutomationProperties.Name="{x:Bind Name}"
                        Content="{x:Bind Name}"
                        ItemsSource="{x:Bind Children}" />
                </DataTemplate>
            </models:HardwareTreeViewTemplateSelector.SensorGroupTemplate>
            <models:HardwareTreeViewTemplateSelector.SensorTemplate>
                <DataTemplate x:DataType="models:SensorNode">
                    <TreeViewItem AutomationProperties.Name="{x:Bind Name}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="{x:Bind Name, Mode=OneWay}" />
                            <TextBlock
                                Grid.Column="1" FontWeight="Bold"
                                Text="{x:Bind Value, Mode=OneWay}" />
                        </Grid>
                    </TreeViewItem>
                </DataTemplate>
            </models:HardwareTreeViewTemplateSelector.SensorTemplate>
        </models:HardwareTreeViewTemplateSelector>
    </Page.Resources>

    <Grid Margin="12" >
        <Grid.Resources>
            <Style TargetType="TextBlock">
                <Setter Property="Margin" Value="0,0,0,6"/>
            </Style>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock x:Uid="SystemResourceUsageHeaderTextBlock" FontSize="{StaticResource SubtitleTextBlockFontSize}" FontWeight="SemiBold" Margin="0,0,0,8"/>
        <Grid x:Name="SystemResourceUsagePanel" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock x:Uid="SystemCpuUsageTextblock" AutomationProperties.AutomationId="SystemCpuUsageTextblock"/>
            <TextBlock
                x:Uid="SystemCpuUsageValueTextBlock"
                Grid.Column="1" FontWeight="Bold"
                Text="{x:Bind ViewModel.CpuUsage, Mode=OneWay}" AutomationProperties.AutomationId="SystemCpuUsageValueTextBlock"/>
            <TextBlock
                x:Uid="SystemMemoryUsageTextBlock" Grid.Row="1" AutomationProperties.AutomationId="SystemMemoryUsageTextBlock"/>
            <TextBlock
                x:Uid="SystemMemoryUsageValueTextBlock" Grid.Row="1" Grid.Column="1" FontWeight="Bold"
                Text="{x:Bind ViewModel.RamUsage, Mode=OneWay}" AutomationProperties.AutomationId="SystemMemoryUsageValueTextBlock"/>
            <TextBlock
                x:Uid="SystemDiskUsageTextBlock" Grid.Row="2" AutomationProperties.AutomationId="SystemDiskUsageTextBlock"/>
            <TextBlock
                x:Uid="SystemDiskUsageValueTextBlock" Grid.Row="2" Grid.Column="1" FontWeight="Bold"
                Text="{x:Bind ViewModel.DiskUsage, Mode=OneWay}" AutomationProperties.AutomationId="SystemDiskUsageValueTextBlock"/>
        </Grid>
        <TextBlock x:Uid="ResourceUsageDetailsTextBlock" FontSize="{StaticResource BodyTextBlockFontSize}" FontWeight="SemiBold" Margin="0,16,0,8" Grid.Row="2"/>
        <TreeView
            ItemTemplateSelector="{StaticResource HardwareTreeViewTemplateSelector}"
            ItemsSource="{x:Bind ViewModel.HardwareMonitor.Hardwares, Mode=OneWay}"  
            CanDragItems="False" CanReorderItems="False" AllowDrop="False" CanDrag="False" Grid.Row="3"/>
    </Grid>
</Page>
